"use strict";(self["webpackChunkstock_frontend"]=self["webpackChunkstock_frontend"]||[]).push([[663,70],{9340:function(t,e,s){s.r(e),s.d(e,{default:function(){return Z}});var a=s(9582),n=s(4886),i=s(266),r=s(9223),o=s(4525),c=s(7722),l=s(1713),d=function(){var t=this,e=t._self._c;return e(a.Z,{staticStyle:{margin:"1%"}},[e(o.Z,{attrs:{"two-line":""}},[e(c.km,[e(c.V9,{staticClass:"text-h5"},[t._v(" "+t._s(t.stock_name)+" ")]),e(c.oZ,[t._v("取值时刻："+t._s(t.$store.state.selected))])],1)],1),e(r.Z),e(n.ZB,{staticClass:"body-1 text-center text--primary"},[e(l.Z,t._l(t.factors,(function(s,a){return e(i.Z,{key:a,attrs:{cols:"12",lg:"4"}},[t._v(" "+t._s(Object.keys(s)[0]+"："+s[Object.keys(s)[0]])+" ")])})),1)],1),e(r.Z),e("info-timeline",{ref:"timeline"})],1)},u=[],m=(s(7658),s(8569)),h=s(2325),f={components:{InfoTimeline:m.Z},data(){return{stock_id:"",stock:{},stock_name:"股票名称",factors:[]}},methods:{getFactorRank(t,e){return t=t.sort(((t,s)=>s[e]-t[e])),t.findIndex((t=>t.stock_id===this.stock_id))+1},initInfo(){this.stock_id=this.$store.state.item.stock_id,this.stock=this.$store.state.item,this.stock_name=this.$store.state.item._stock_name;let t=JSON.parse(JSON.stringify(this.$store.state.metaData)),e=JSON.parse(JSON.stringify(this.$store.state.metaData)).filter((t=>t.stock_id===this.stock_id))[0];(0,h.cleanFactor)(e);for(let s in e){let a=this.getFactorRank(t,s);this.factors.push({[s]:e[s]+"（"+a+"|"+t.length+"）"})}}},created(){this.initInfo()}},p=f,k=s(1001),_=(0,k.Z)(p,d,u,!1,null,null,null),Z=_.exports},7325:function(t,e,s){s.r(e),s.d(e,{default:function(){return w}});var a=s(9582),n=s(4886),i=s(266),r=s(1713),o=s(2648),c=function(){var t=this,e=t._self._c;return e("div",{staticClass:"container"},[e("div",[e(r.Z,{staticClass:"chat-history"},t._l(t.cards,(function(s){return e(i.Z,{key:s,attrs:{cols:"12"}},[e(a.Z,{staticClass:"py-2",attrs:{elevation:"0",outlined:""}},[e(n.ZB,{staticClass:"text-body-1"},[t._v(t._s(s))]),s.command&&"about"===s.command.name?e(a.Z,{staticClass:"my-2",attrs:{elevation:"0"}},[e("about-vue")],1):s.command&&"basicInfo"===s.command.name?e(a.Z,{staticClass:"my-2",attrs:{elevation:"0"}},[e("basic-info-vue")],1):s.command&&"compInfo"===s.command.name?e(a.Z,{staticClass:"my-2",attrs:{elevation:"0"}},[e("comp-info-vue")],1):s.command&&"histExp"===s.command.name?e(a.Z,{staticClass:"my-2",attrs:{elevation:"0"}},[e("hist-exp-vue")],1):s.command&&"simiExp"===s.command.name?e(a.Z,{staticClass:"my-2",attrs:{elevation:"0"}},[e("simi-exp-vue")],1):s.command&&"home"===s.command.name?e(a.Z,{staticClass:"my-2",attrs:{elevation:"0"}},[e("home-vue")],1):t._e()],1)],1)})),1)],1),e("div",{staticClass:"chat-input"},[e(o.Z,{staticClass:"mx-5 mt-3",attrs:{"append-icon":"mdi-send","auto-grow":"",clearable:"",rounded:"",rows:"1",solo:""},on:{"click:append":t.sendClick,keydown:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.sendClick.apply(null,arguments)}},model:{value:t.msg,callback:function(e){t.msg=e},expression:"msg"}})],1)])},l=[],d=(s(7658),s(8859)),u=s(2537);function m(t){return(0,d.o)({url:`${u.J}/chat`,method:"post",data:{content:t}})}function h(t){return(0,d.o)({url:`${u.J}/stock_id/${t}`,method:"get"})}var f=s(8419),p=s(4966),k=s(8536),_=s(9340),Z=s(1070),v=s(9241),g=s(6843),y=s(4239),C=s(1770),b=s(2325),x={components:{HomeVue:p["default"],BasicInfoVue:_["default"],CompInfoVue:Z["default"],AboutVue:k["default"],HistExpVue:v["default"],SimiExpVue:g["default"]},data(){return{cards:["你好","你好👋，我是基于 ChatGPT 开发的股票助手，可以根据您的问题自动展示股票信息，例如您可以提问我：明德生物明天的走势如何？"],msg:""}},methods:{sendClick(){this.cards.push(this.msg),(0,f.h)("success","正在获取回应"),m(this.msg).then((t=>{if(200!==t.status)return void(0,f.h)("error","获取 API 调用失败");let e=t.data.command.name;if("do_nothing"!==e){if(0!==Object.keys(t.data.command.args).length){let e=t.data.command.args.stock_name;if("<stock_name>"===e)return void this.cards.push(t.data);(0,f.h)("success","正在获取股票代码"),h(e).then((s=>{200===t.status?(y.Z.commit("setItem",{stock_id:s.data.stock_id,_stock_name:e,headers1:e}),this.cards.push(t.data)):(0,f.h)("error","获取 API 调用失败")}))}else this.cards.push(t.data);console.log(t.data)}else this.cards.push(t.data),this.cards.push("请提供更多信息");this.msg=""}))},initFilters(){(0,C.Zj)().then((t=>{let e=t.data.data,s=[];for(let a in e)s.push(e[a]);this.filters=s,this.selected=s[s.length-1],this.initStock(),(0,f.h)("success","数据更新成功")})).catch()},initData(){this.initFilters()},initStock(){(0,C.VZ)(this.selected).then((t=>{if(200===t.data.status){let e=t.data.headers,s=t.data.data;y.Z.commit("setMetaData",JSON.parse(JSON.stringify(t.data.data))),e=(0,b.cleanMeta)(e),(0,b.initHeaders2)(e,this),(0,b.reMapData)(s,e),this.stocks=s,(0,f.h)("success","数据更新成功")}else(0,f.h)("error","股票数据更新失败")})).catch()}},created(){this.initData()}},I=x,S=s(1001),$=(0,S.Z)(I,c,l,!1,null,null,null),w=$.exports},1070:function(t,e,s){s.r(e),s.d(e,{default:function(){return d}});var a=function(){var t=this,e=t._self._c;return e("CompEchart",{attrs:{info:t.info}})},n=[],i=s(3026),r={name:"CompInfo.vue",components:{CompEchart:i.Z},data(){return{info:{time:""}}},created(){this.info.time=this.$store.state.selected,console.log(this.info)}},o=r,c=s(1001),l=(0,c.Z)(o,a,n,!1,null,"fdf9896a",null),d=l.exports},6843:function(t,e,s){s.r(e),s.d(e,{default:function(){return w}});var a=s(6190),n=s(9582),i=s(4886),r=s(3863),o=s(9930),c=s(1713),l=s(626),d=s(2165),u=s(7771),m=s(5085),h=s(1783),f=function(){var t=this,e=t._self._c;return e("div",[e(u.Z,{attrs:{grow:""},model:{value:t.tabs,callback:function(e){t.tabs=e},expression:"tabs"}},t._l(2,(function(s){return e(l.Z,{key:s,staticStyle:{width:"auto"},on:{change:function(e){return t.changeTab(s)}}},[t._v(" "+t._s(t.tabsTitle[s-1])+" ")])})),1),e(m.Z,{model:{value:t.tabs,callback:function(e){t.tabs=e},expression:"tabs"}},[e(d.Z,[e(n.Z,{staticStyle:{margin:"1%"}},[e(i.EB,[t._v(" 场景相关相似个股 ")]),e(r.Z,{attrs:{headers:t.headers,items:t.stocks,"footer-props":t.footers,"no-data-text":"暂无数据"},scopedSlots:t._u([{key:"item.headers1",fn:function({item:s}){return[e(o.Z,{attrs:{transition:"dialog-top-transition","max-width":"600"},scopedSlots:t._u([{key:"activator",fn:function({on:n,attrs:i}){return[e(a.Z,t._g(t._b({staticClass:"ml-n5",attrs:{text:"",left:""}},"v-btn",i,!1),n),[t._v(" "+t._s(s.headers1)+" ")])]}},{key:"default",fn:function(r){return[e(n.Z,[e(h.Z,{attrs:{color:"primary",dark:""}},[t._v(t._s(s.headers1)+" - "+t._s(s.headers0)+"-个股画像")]),e(i.ZB,[e(c.Z,{staticClass:"ma-2",attrs:{align:"center",justify:"space-around"}},[e(a.Z,{staticClass:"ma-2",attrs:{depressed:"",color:"primary"},on:{click:function(e){return t.changeItem("about",s)}}},[t._v(" 综合评价与区间预测 ")]),e(a.Z,{staticClass:"ma-2",attrs:{depressed:"",color:"primary"},on:{click:function(e){return t.changeItem("histExp",s)}}},[t._v(" 股票自身历史经验 ")]),e(a.Z,{staticClass:"ma-2",attrs:{depressed:"",color:"primary"},on:{click:function(e){return t.changeItem("basicInfo",s)}}},[t._v(" 场景相关基础信息 ")]),e(a.Z,{staticClass:"ma-2",attrs:{depressed:"",color:"primary"},on:{click:function(e){return t.changeItem("compInfo",s)}}},[t._v(" 场景因子比较信息 ")]),e(a.Z,{staticClass:"ma-2",attrs:{depressed:"",color:"primary"},on:{click:function(e){return t.changeItem("simiExp",s)}}},[t._v(" 其他个股相似经验 ")])],1)],1)],1)]}}],null,!0)})]}},{key:"item.headers2",fn:function({item:e}){return[t._v(" "+t._s((100*e.headers2).toFixed(4))+"% ")]}}])})],1)],1),e(d.Z,[e(n.Z,{staticStyle:{margin:"1%"}},[e(i.EB,[t._v(" 场景无关相似个股 ")]),e(r.Z,{staticStyle:{"align-items":"center"},attrs:{headers:t.headers,items:t.stocks_none,"footer-props":t.footers,"no-data-text":"暂无数据"},scopedSlots:t._u([{key:"item.headers1",fn:function({item:s}){return[e(o.Z,{attrs:{transition:"dialog-top-transition","max-width":"600"},scopedSlots:t._u([{key:"activator",fn:function({on:n,attrs:i}){return[e(a.Z,t._g(t._b({staticClass:"ml-n5",attrs:{text:"",left:""}},"v-btn",i,!1),n),[t._v(" "+t._s(s.headers1)+" ")])]}},{key:"default",fn:function(r){return[e(n.Z,[e(h.Z,{attrs:{color:"primary",dark:""}},[t._v(t._s(s.headers1)+" - "+t._s(s.headers0)+"-个股画像")]),e(i.ZB,[e(c.Z,{staticClass:"ma-2",attrs:{align:"center",justify:"space-around"}},[e(a.Z,{staticClass:"ma-2",attrs:{depressed:"",color:"primary"},on:{click:function(e){return t.changeItem("about",s)}}},[t._v(" 综合评价与区间预测 ")]),e(a.Z,{staticClass:"ma-2",attrs:{depressed:"",color:"primary"},on:{click:function(e){return t.changeItem("histExp",s)}}},[t._v(" 股票自身历史经验 ")]),e(a.Z,{staticClass:"ma-2",attrs:{depressed:"",color:"primary"},on:{click:function(e){return t.changeItem("basicInfo",s)}}},[t._v(" 场景相关基础信息 ")]),e(a.Z,{staticClass:"ma-2",attrs:{depressed:"",color:"primary"},on:{click:function(e){return t.changeItem("compInfo",s)}}},[t._v(" 场景因子比较信息 ")]),e(a.Z,{staticClass:"ma-2",attrs:{depressed:"",color:"primary"},on:{click:function(e){return t.changeItem("simiExp",s)}}},[t._v(" 其他个股相似经验 ")])],1)],1)],1)]}}],null,!0)})]}},{key:"item.headers2",fn:function({item:e}){return[t._v(" "+t._s((100*e.headers2).toFixed(4))+"% ")]}}])})],1)],1)],1)],1)},p=[],k=(s(7658),s(8419)),_=s(8859),Z=s(2537);function v(t,e){return(0,_.o)({url:`${Z.J}/related/${t}/${e}`,method:"get"})}function g(t,e){return(0,_.o)({url:`${Z.J}/unrelated/${t}/${e}`,method:"get"})}var y=s(4239),C=s(9644),b=s(2325),x={data(){return{tabs:null,id:"",tabsTitle:["场景相关相似个股","场景无关相似个股"],dialog:!1,headers:[],footers:{showCurrentPage:!0,itemsPerPageText:"每页记录数",showFirstLastPage:!0},stocks:[],stocks_none:[]}},methods:{initRelatedStock(){let t=this.$store.state.item.stock_id,e=this.$store.state.selected;v(t,e).then((t=>{if(200===t.data.status){let e=t.data.headers;e=(0,b.cleanMeta)(e);let s=t.data.data;(0,b.initHeaders2)(e,this),(0,b.reMapData)(s,e),this.stocks=s,(0,k.h)("success","数据更新成功")}else(0,k.h)("error","相似度数据暂不存在")})).catch()},initUnRelatedStock(){let t=this.$store.state.item.stock_id,e=this.$store.state.selected;g(t,e).then((t=>{if(200===t.data.status){let e=t.data.headers;e=(0,b.cleanMeta)(e);let s=t.data.data;(0,b.initHeaders2)(e,this),(0,b.reMapData)(s,e),this.$set(this,"stocks_none",s),(0,k.h)("success","数据更新成功")}else(0,k.h)("error","相似度数据暂不存在")})).catch()},changeItem(t,e){let s=e.headers1;e.stock_id=e["股票代码"],y.Z.commit("setTitle2","个股画像——"+s),y.Z.commit("setItem",e),y.Z.commit("setSelected",this.selected),t&&C.Z.push(t)},changeTab(t){switch(t){case 1:this.initRelatedStock();break;case 2:this.initUnRelatedStock();break}}},created(){this.initRelatedStock()}},I=x,S=s(1001),$=(0,S.Z)(I,f,p,!1,null,null,null),w=$.exports}}]);
//# sourceMappingURL=663.c01d3b51.js.map